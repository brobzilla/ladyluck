{% extends "layout.html" %}
{% block content %}





<b> {{ game.game_played_time }}: {{ player1.name }} versus {{ player2.name }}, won by {{ winner }} </b>
<br>
<hr>
<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-vertical ui-helper-clearfix">
    <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
        <li class="ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="-1" aria-controls="a" aria-labelledby="ui-id-1" aria-selected="true">
            <a href="#a" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-1">Dice Stats</a>
        </li>
        <li class="ui-state-default ui-corner-top"  role="tab" tabindex="0" aria-controls="b" aria-labelledby="ui-id-2" aria-selected="false">
            <a href="#b" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">Player graphs</a>
        </li>
        <li class="ui-state-default ui-corner-top"  role="tab" tabindex="0" aria-controls="b" aria-labelledby="ui-id-2" aria-selected="false">
            <a href="#d" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">Versus graphs</a>
        </li>

        <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="c" aria-labelledby="ui-id-3" aria-selected="false">
            <a href="#c" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-3">Game Tape</a>
        </li>
    </ul>
    <div id="a" aria-labelledby="ui-id-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;">

        <style type="text/css">
        .tg1  {border-collapse:collapse;border-spacing:0;}
        .tg1 td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
        .tg1 th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
        .tg1 .tg-ii5f{background-color:#ecf4ff;color:#ffffff}
        .tg1 .tg-fdty{background-color:#efefef;color:#000000}
        .tg1 .tg-cxkv{background-color:#ffffff}
        .tg1 .tg-tr94{background-color:#efefef;color:#000000;text-align:center}
        .tg1 .tg-6997{background-color:#ffffff;color:#000000;text-align:center}
        .tg1 .tg-zlxb{background-color:#ffffff;text-align:center}
        .tg1 .tg-bsv2{background-color:#efefef}
        .tg1 .no_color{background-color:#ffffff;text-align:center;}
        .tg1 .red1{background-color:#FFE6E6;text-align:center;}
        .tg1 .red2{background-color:#FFCCCC;text-align:center;}
        .tg1 .red3{background-color:#FFB2B2;text-align:center;}
        .tg1 .red4{background-color:#FF9999;text-align:center;}
        .tg1 .red5{background-color:#FF8080;text-align:center;}
        .tg1 .red6{background-color:#FF6666;text-align:center;}
        .tg1 .red7{background-color:#FF4D4D;text-align:center;}
        .tg1 .red8{background-color:#FF3333;text-align:center;}
        .tg1 .red9{background-color:#FF1919;text-align:center;}
        .tg1 .green1{background-color:#E6FAF0;text-align:center;}
        .tg1 .green2{background-color:#CCF5E0;text-align:center;}
        .tg1 .green3{background-color:#B2F0D1;text-align:center;}
        .tg1 .green4{background-color:#99EBC2;text-align:center;}
        .tg1 .green5{background-color:#80E6B2;text-align:center;}
        .tg1 .green6{background-color:#66E0A3;text-align:center;}
        .tg1 .green7{background-color:#4DDB94;text-align:center;}
        .tg1 .green8{background-color:#33D685;text-align:center;}
        .tg1 .green9{background-color:#19D175;text-align:center;}
        .tg1 .tg-ek65{background-color:#ffffff;color:#000000}
        </style>




        <table class="tg1">
          <tr>
            <th class="tg-tr94">{{ player1.name }}</th>
            <th class="tg-6997" colspan="6">{{ game_tape.total_attack_sets(player1)}} attack sets rolled<br>red dice rolled: {{ game_tape.total_reds(player1) }}<br>after rerolls: {{ game_tape.total_reds_after_rerolls(player1) }}</th>
            <th class="tg-ii5f" rowspan="7"></th>
            <th class="tg-tr94">{{ player2.name }}</th>
            <th class="tg-6997" colspan="6">{{ game_tape.total_attack_sets(player2)}} attack sets rolled<br>red dice rolled: {{ game_tape.total_reds(player2) }}<br>after rerolls: {{ game_tape.total_reds_after_rerolls(player2) }}</th>

          </tr>
          <tr>
            <td class="tg-tr94">face</td>
            <td class="tg-tr94">expected</td>
            <td class="tg-tr94">expected after rerolls</td>
            <td class="tg-tr94">actual</td>
            <td class="tg-tr94">actual after rerolls</td>
            <td class="tg-tr94">actual after converts</td>
            <td class="tg-tr94">total added</td>
            <td class="tg-tr94">face</td>
            <td class="tg-tr94">expected</td>
            <td class="tg-tr94">expected after rerolls</td>
            <td class="tg-tr94">actual</td>
            <td class="tg-tr94">actual after rerolls</td>
            <td class="tg-tr94">actual after converts</td>
            <td class="tg-tr94">total added</td>

          </tr>
          <tr>
            <td class="tg-bsv2">hits</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_hits(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_hits_after_rerolls(player1) }}</td>
            <td class="{{ colorscale.colormap( game_tape.expected_unmodified_hits(player1), game_tape.unmodified_hits(player1) )  }}">{{ game_tape.unmodified_hits(player1) }}</td>
            <td class="{{ colorscale.colormap( game_tape.expected_hits_after_rerolls(player1), game_tape.total_red_hits_after_rerolls(player1) )  }}">{{ game_tape.total_red_hits_after_rerolls(player1) }}</td>
            <td class="{{ colorscale.colormap( game_tape.expected_hits_after_rerolls(player1), game_tape.total_red_hits_after_converts(player1) )  }}">{{ game_tape.total_red_hits_after_converts(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.hits_added(player1) }}</td>
            <td class="tg-bsv2">hits</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_hits(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_hits_after_rerolls(player2) }}</td>
            <td class="{{ colorscale.colormap( game_tape.expected_unmodified_hits(player2), game_tape.unmodified_hits(player2) )  }}">{{ game_tape.unmodified_hits(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_hits_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_hits_after_converts(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.hits_added(player2)}}</td>

          </tr>
          <tr>
            <td class="tg-bsv2">crits</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_crits(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_crits_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_crits(player1) }} </td>
            <td class="tg-ek65">{{ game_tape.total_red_crits_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_crits_after_converts(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.crits_added(player1) }}</td>
            <td class="tg-bsv2">crits</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_crits(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_crits_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_crits(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_crits_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_crits_after_converts(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.crits_added(player2) }}</td>


          </tr>
          <tr>
            <td class="tg-bsv2">focuses</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_focuses(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_focuses_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_focuses(player1) }} </td>
            <td class="tg-ek65">{{ game_tape.total_red_focuses_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_focuses_after_converts(player1) }}</td>
            <td class="tg-ek65">0</td>
            <td class="tg-bsv2">focuses</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_focuses(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_focuses_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_focuses(player2) }} </td>
            <td class="tg-ek65">{{ game_tape.total_red_focuses_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_focuses_after_converts(player2) }}</td>
            <td class="tg-ek65">0</td>
          </tr>
          <tr>
            <td class="tg-bsv2">blanks</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_blanks(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_blanks_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_blanks(player1) }} </td>
            <td class="tg-ek65">{{ game_tape.total_red_blanks_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_blanks_after_converts(player1) }}</td>
            <td class="tg-ek65">0</td>
            <td class="tg-bsv2">blanks</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_blanks(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_blanks_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_blanks(player2) }} </td>
            <td class="tg-ek65">{{ game_tape.total_red_blanks_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_red_blanks_after_converts(player2) }}</td>
            <td class="tg-ek65">0</td>
          </tr>
          <tr>
            <td class="tg-ii5f" colspan="14"></td>
          </tr>
          <tr>
            <td class="tg-tr94">{{ player1.name }}</td>
            <td class="tg-zlxb" colspan="6">green dice rolled: {{  game_tape.total_greens(player1) }}<br>after rerolls: {{ game_tape.total_greens_after_rerolls(player1) }}</td>
            <td class="tg-ii5f" rowspan="5"></td>
            <td class="tg-tr94">{{ player2.name }}</td>
            <td class="tg-zlxb" colspan="6">green dice rolled: {{  game_tape.total_greens(player2) }}<br>after rerolls: {{ game_tape.total_greens_after_rerolls(player2) }}</td>
          </tr>
          <tr>
            <td class="tg-tr94">face</td>
            <td class="tg-tr94">expected</td>
            <td class="tg-tr94">expected after rerolls</td>
            <td class="tg-tr94">actual</td>
            <td class="tg-tr94">actual after rerolls</td>
            <td class="tg-tr94">actual after converts</td>
            <td class="tg-tr94">total added</td>
            <td class="tg-tr94">face</td>
            <td class="tg-tr94">expected</td>
            <td class="tg-tr94">expected after rerolls</td>
            <td class="tg-tr94">actual</td>
            <td class="tg-tr94">actual after rerolls</td>
            <td class="tg-tr94">actual after converts</td>
            <td class="tg-tr94">total added</td>

          </tr>
          <tr>
            <td class="tg-fdty">evades</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_evades(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_green_evades_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_evades(player1) }} </td>
            <td class="tg-ek65">{{ game_tape.total_green_evades_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_evades_after_converts(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_evades_added(player1) }}</td>
            <td class="tg-bsv2">evades</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_evades(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_green_evades_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_evades(player2) }} </td>
            <td class="tg-ek65">{{ game_tape.total_green_evades_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_evades_after_converts(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_evades_added(player2) }}</td>

          </tr>
          <tr>
            <td class="tg-fdty">focuses</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_green_focuses(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_green_focuses_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_green_focuses(player1) }} </td>
            <td class="tg-ek65">{{ game_tape.total_green_focuses_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_focuses_after_converts(player1) }}</td>
            <td class="tg-ek65">0</td>
            <td class="tg-bsv2">focuses</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_green_focuses(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_green_focuses_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_green_focuses(player2) }} </td>
            <td class="tg-ek65">{{ game_tape.total_green_focuses_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_focuses_after_converts(player2) }}</td>
            <td class="tg-ek65">0</td>
          </tr>
          <tr>
            <td class="tg-fdty">blanks</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_green_blanks(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_green_blanks_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_green_blanks(player1) }} </td>
            <td class="tg-ek65">{{ game_tape.total_green_blanks_after_rerolls(player1) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_blanks_after_converts(player1) }}</td>
            <td class="tg-ek65">0</td>
            <td class="tg-bsv2">blanks</td>
            <td class="tg-ek65">{{ game_tape.expected_unmodified_green_blanks(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.expected_green_blanks_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.unmodified_green_blanks(player2) }} </td>
            <td class="tg-ek65">{{ game_tape.total_green_blanks_after_rerolls(player2) }}</td>
            <td class="tg-ek65">{{ game_tape.total_green_blanks_after_converts(player2) }}</td>
            <td class="tg-ek65">0</td>

       </tr>
        </table>

    </div>
    <div id="b" aria-labelledby="ui-id-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-expanded="true" aria-hidden="false" style="display: block;">

        <b>Initial and adjusted luck graphs</b>
        <table class="tg1">
            <tr>
                <td class="tg-tr94">{{ player1.name }} attack luck; solid line = after rerolls/focuses
                    <img src="data:image/png;base64,{{ game_tape.luck_graph( player1, player2, "R") }}"> </td>
                <td class="tg-tr94">{{ player2.name }} attack luck;  solid line = after rerolls/focuses
                    <img src="data:image/png;base64,{{ game_tape.luck_graph( player2, player1, "R") }}"> </td>

            </tr>
            <tr>
                <td class="tg-tr94">{{ player1.name }} defense luck;  solid line = after rerolls/focuses
                    <img src="data:image/png;base64,{{ game_tape.luck_graph( player1, player2, "G") }}"> </td>
                <td class="tg-tr94">{{ player2.name }} defense luck;  solid line = after rerolls/focuses
                    <img src="data:image/png;base64,{{ game_tape.luck_graph( player2, player1, "G") }}"> </td>

            </tr>

        </table>


    </div>
    <div id="d" aria-labelledby="ui-id-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-expanded="true" aria-hidden="false" style="display: block;">

        <b>Versus</b>

        <table class="tg1">
            <tr>
                <td class="tg-tr94">Converted advantage over time, red = {{ player1.name }}, green = {{ player2.name }} <img src="data:image/png;base64,{{ game_tape.advantage_graph(1) }}"></td>
                <td class="tg-tr94">Damage over time, red = {{ player1.name }}, green = {{ player2.name }}<img src="data:image/png;base64,{{ game_tape.damage_graph() }}"></td>
            </tr>
            <tr>
                <td class="tg-tr94">{{ player1.name }} attack luck versus {{ player2.name }} defense luck
                    <img src="data:image/png;base64,{{ game_tape.versus_graph( attacker=player1, defender=player2) }}">
                </td>
                <td class="tg-tr94">{{ player2.name }} attack luck versus {{ player1.name }} defense luck
                    <img src="data:image/png;base64,{{ game_tape.versus_graph( attacker=player2, defender=player1 ) }}">
                </td>

            </tr>
        </table>



    </div>

    <div id="c" aria-labelledby="ui-id-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;">

        <style type="text/css">
            .tg  {border-collapse:collapse;border-spacing:0;}
            .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
            .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
            .tg .tg-ii5f{background-color:#000000;color:#ffffff}
            .tg .tg-1bl1{background-color:#bdc3c7}
            .tg .tg-nkg8{background-color:#F0F6FA;color:#000000; text-align: center}
            .tg .tg-rh4c{background-color:#F0F6FA}
            .tg .tg-o1{background-color:#F8F8F8}
            .tg .tg-o2{background-color:#D0D0D0}
            .tg .tg-o3{background-color:#A8A8A8}
            .tg .tg-o4{background-color:#808080}
            .tg .tg-o5{background-color:#585858}
            .tg .tg-o6{background-color:#303030}


        </style>
        <i>Click on the circles to jump to the attack set</i>
        <br>
        <b>Player1 :</b> {{ player1.name }}
        <br>
        <b>Player 2:</b> {{ player2.name }}
        {% for attack_set_subset in game_tape.attack_set_subsets(modvalue=15) %}
            <br>
            <table class="tg">
                <tr>
                    {%  for attack_set in attack_set_subset %}
                        <td class="tg-o2">
                        <center>{{ attack_set.number }}</center>
                            <table class="tg">
                                {%  if attack_set.attacking_player.name == player1.name %}
                                    <tr><td class="tg-o1">Player1</td></tr>
                                {%  else %}
                                    <tr><td class="tg-o1">Player2</td></tr>
                                {%  endif %}
                                    <tr>
                                        <td class="tg-o1">
                                            <a href="#attack_set{{attack_set.number}}"><canvas id="circlecanvas{{attack_set.number}}_1" width="40" height="40"></canvas></a>
                                            <script>
                                              var canvas = document.getElementById("circlecanvas{{attack_set.number}}_1");
                                              var context = canvas.getContext("2d");
                                              context.strokeStyle="red"
                                              context.fillStyle="red"
                                              context.arc(20, 20, Math.abs({{attack_set.total_attack_end_luck() }}) * (40/3.5), 0, Math.PI * 2, false);
                                              {%  if attack_set.total_attack_end_luck() < 0  %}
                                                  context.stroke()
                                              {% else %}
                                                  context.fill()
                                              {%  endif %}
                                            </script> <a href="#attack_set{{attack_set.number}}"><canvas id="circlecanvas{{attack_set.number}}_2" width="40" height="40"></canvas></a>
                                            <script>
                                              var canvas = document.getElementById("circlecanvas{{attack_set.number}}_2");
                                              var context = canvas.getContext("2d");
                                              context.strokeStyle="green"
                                              context.fillStyle="green"
                                              context.arc(20, 20, Math.abs({{attack_set.total_defense_end_luck() }}) * (40/3.5), 0, Math.PI * 2, false);
                                              {%  if attack_set.total_defense_end_luck() == None or attack_set.total_defense_end_luck() < 0  %}
                                                  context.stroke()
                                              {% else %}
                                                  context.fill()
                                              {%  endif %}
                                            </script>
                                            <center>{{ attack_set.hits_comma_crits_string() }}</center>

                                        </td>
                                    </tr>
                            </table>
                        </td>
                    {% endfor %}
                </tr>
            </table>
        {%  endfor %}

        {% for attack_set in game_tape.attack_sets %}
            <br>

            <a name="attack_set{{ loop.index }}"><b> {{  attack_set.number }}</b></a>

            <table class="tg">
              <tr>
                <th class="tg-031e" colspan="7">Attacker: {{ attack_set.attacking_player.name }}</th>
                <th class="tg-nkg8" rowspan="2"><br>Final<br>Result</th>
                <th class="tg-031e" colspan="7">Defender: {{ attack_set.defending_player.name }}</th>
              </tr>
              <tr>
                <td class="tg-nkg8">dice num</td>
                <td class="tg-nkg8">roll</td>
                <td class="tg-nkg8">reroll</td>
                <td class="tg-nkg8">convert</td>
                <td class="tg-nkg8">added</td>
                <td class="tg-nkg8">cancelled</td>
                <td class="tg-nkg8">end</td>
                <td class="tg-nkg8">end</td>
                <td class="tg-nkg8">cancelled</td>
                <td class="tg-nkg8">added</td>
                <td class="tg-nkg8">convert</td>
                <td class="tg-nkg8">reroll</td>
                <td class="tg-nkg8">roll</td>
                <td class="tg-nkg8">dice_num</td>

  </tr>
                {% for rec in attack_set.records  %}
                    <td class="tg-o1">{{ rec.dice_num }}</td>
                    <td class="tg-o2"><img src={{ rec.attack_roll_as_img()  }}></td>
                    <td class="tg-o3"><img src={{ rec.attack_reroll_as_img() }}></td>
                    <td class="tg-o4"><img src={{ rec.attack_convert_as_img() }}></td>
                    <td class="tg-o4"><img src={{ rec.attack_added_as_img() }}></td>
                    <td class="tg-o4"><img src={{ rec.attack_cancelled_as_img() }}></td>
                    <td class="tg-o5"><img src={{ rec.attack_end_as_img() }}></td>
                    <td class="tg-o6"><img src={{ rec.final_as_image() }}></td>
                    <td class="tg-o5"><img src={{ rec.defense_end_as_img() }}></td>
                    <td class="tg-o4"><img src={{ rec.defense_cancelled_as_img() }}></td>
                    <td class="tg-o4"><img src={{ rec.defense_added_as_img() }}></td>
                    <td class="tg-o4"><img src={{ rec.defense_convert_as_img() }}></td>
                    <td class="tg-o3"><img src={{ rec.defense_reroll_as_img() }}></td>
                    <td class="tg-o2"><img src={{ rec.defense_roll_as_img() }}></td>
                    <td class="tg-o1">{{ rec.dice_num }}</td>
                  </tr>
                {% endfor %}
                <tr>
                    <td class="tg-nkg8" border="0" >score</td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" >{{ attack_set.total_attack_end_luck() }}</td>
                    <td class="tg-nkg8" border="0" >{{  attack_set.hits_comma_crits_string() }}</td>
                    <td class="tg-nkg8" border="0" >{{ attack_set.total_defense_end_luck() }}</td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>
                    <td class="tg-nkg8" border="0" ></td>

                </tr>
            </table>
        {%  endfor %}


    </div>
</div>



{% endblock %}

